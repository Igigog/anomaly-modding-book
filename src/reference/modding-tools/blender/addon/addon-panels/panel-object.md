# X-Ray Engine: Object

___

## About

На этой странице описана панель X-Ray Engine: Object.

Расположение
Окно Properties, вкладка Object.

Параметры из блока Object

Object
Если включён, то объект является root-объектом.

Type
Тип объекта.

Static - статичный (геометрия уровня).
Dynamic - динамический (объект со скелетом).
Progressive Dynamic - динамический с уровнями детализации (в игре объект будет изменять количество полигонов, в зависимости от расстояния до игровой камеры).
HOM - отсекатель геометрии на уровне (используется для создания level.hom файлов).
Multiple Usage - многократно используемые объекты (деревья, транспорт, камни и т. д.).
Sound Occluder - отсекатель звука на уровне (используется для создания level.som файлов).
Custom - настраиваемый (тип объекта реализован в виде флагов, поэтому этот тип имеет возможность произвольно задавать каждый флаг).

HQ Export
Параметр, который аналогичен параметру HQ Geometry в Actor Editor из X-Ray SDK 0.7. Если включён, то при экспорте *.object файла в *.ogf с помощью Actor Editor, не будет использована оптимизация мешей.

LOD Reference
Строка, которая указывает относительный путь к *.ogf файлу LOD-модели.

Export Path
Относительный путь к объекту, который используется во время массового экспорта или при экспорте в .level, .part, .group. Если при экспорте в *.object или *.ogf будет включен параметр Use Export Paths, то данный путь прибавится к пути папки, в которую производится экспорт. Это нужно для экспорта файлов в те же папки, из которых они были импортированы. Например, если имя объекта будет test_object, путь при экспорте в *.object будет c:\xray_sdk\rawdata\objects, а параметр Export Path будет test_folder\test_objects\, то окончательный путь *.object файла будет c:\xray_sdk\rawdata\objects\test_folder\test_objects\test_object. Если производится экспорт в форматы .level, .part, .group, то Export Path будет использован для генерации относительного пути к объекту в X-Ray SDK. Например, если имя объекта будет test_object.object, параметр Export Path будет test_folder\test_objects\, то относительный путь, который запишется в файл, будет test_folder\test_objects\test_object. Расширение .object не будет сохранено. Так же не будут сохранены цифры и точка в конце имени объекта (например, имя test.003 станет test, что позволит в сцене иметь много объектов, которые ссылаются на один и тот же *.object файл). Рядом с параметром Export Path есть оператор с иконкой папки, с помощью которого можно указать значение для этого параметра. После запуска откроется файловый браузер, далее нужно указать папку, находящуюся в каталоге, который указан в параметре Objects Folder или Meshes Folder в настройках аддона. После чего будет сгенерирован Export Path, относительно папки rawdata\objects или gamedata\meshes.

User Data
Строка, которая указывает пользовательские данные. Чтобы отобразить содержимое User Data, нужно нажать кнопку User Data. Правее расположены кнопки копирования, вставки и удаления User Data.

Motions
Список анимаций объекта. Выделенная анимация может быть только одна и имеет галочку слева. Данные анимации сохраняются в *.object, *.ogf, *.skls, *.omf файлы при экспорте. Справа от списка есть операторы для управления элементами списка. Описания операторов сверху вниз:

Добавить новый элемент списка.
Удалить выбранный элемент списка.
Переместить выбранную анимацию вверх на одну позицию.
Переместить выбранную анимацию вниз на одну позицию.
Добавить в список все анимации blend-файла, которые имеют ключи для костей арматуры root-объекта.
Очистить список анимаций, удалив те элементы, которые указывают на не существующие action блоки данных или имеют пустое значение.
Удалить все элементы списка.
Копировать список анимаций в буфер обмена для последующей вставки другим объектам.
Вставить скопированный список анимаций из буфера обмена.
Сортировать список анимаций. Оператор сортировки имеет параметры.
Sort by - указывает метод сортировки.
Action Name - в алфавитном порядке по имени action-блока данных.
Export Name - в алфавитном порядке по Export Name.
Action Length - сначала сортирует по длине анимации, потом в алфавитном порядке, если длины анимаций совпадают.
Reverse Sort - указывает обратный способ сортировки по убыванию, вместо возрастания.

Play Active Motion
Если включён, то выбранная в списке Motions анимация будет установлена арматуре. Можно пролистывать анимации в списке и просматривать их в 3D окне.

Custom Names
Использовать настраиваемые имена анимаций. Если этот параметр выключен, то при экспорте в файл запишется имя Action-блока данных. Если данный параметр включён, то анимациям можно будет задать имя Export Name, которое используется при экспорте. Если параметр Export Name пустой, то будет использовано имя Action-блока данных.

Show
Указывает, какие имена анимаций отображать.

Action - имя Action-блока данных.
Export - имя, которое используется для экспорта и указано в параметре Export Name.
Both - отображать оба имени.

Dependency
Зависимость в виде другого объекта. Используется в тех случаях, когда анимации зависят от анимаций у других объектов. Если в этом параметре указан объект, то при экспорте или при включении анимации с параметром Play Active Motion указанному объекту установится та же анимация, что у текущего. Например, это может быть использовано для анимации hud-моделей оружия из ЧН/ЗП. Скелет оружия может иметь констрейнты Copy Transforms для кости wpn_body, которые копируют трансформации кости lead_gun у скелета рук. Если при экспорте скелету рук не устанавливать ту же анимацию, что у оружия, то анимация у оружия будет одинаковой для всех анимаций из списка.

Motion Refs
Список ссылок на внешние *.omf файлы с анимациями. Справа список имеет операторы для управления элементами списка. Описания операторов сверху вниз:

Добавить элемент списка.
Удалить выбранный элемент списка.
Переместить выбранный элемент списка на одну позицию вверх.
Переместить выбранный элемент списка на одну позицию вниз.
Удалить все элементы списка.
Копирует список элементов в буфер обмена.
Вставляет список элементов из буфера обмена.
Сортирует список элементов по алфавиту. Данный оператор имеет параметр:
Reverse Sort - указывает обратный способ сортировки по убыванию, вместо возрастания.
Указывает элементы списка с помощью выбора *.omf файлов. После запуска оператора, откроется файловый браузер, в котором нужно выбрать один или несколько *.omf файлов. Чтобы ссылки на файлы сгенерировались, нужно в настройках аддона указать параметр Meshes Folder. Аддон сгенерирует относительные пути к *omf файлам на основе папки Meshes Folder, поэтому нужно выбирать только те *.omf файлы, которые находятся внутри Meshes Folder.

Load Active Motion Refs
Если включён, то выбранный motion reference добавится в Motions Browser. Параметр Format указывает какой формат анимаций использовать: *.skls или *.omf. Файл с анимациями должен находится в папке Objects Folder или Meshes Folder, которые задаются в настройках аддона.

Owner Name
Автор модели.

Created Time
Время создания модели. Формат времени отображается в подсказке ниже.

Moder Name
Модифицирующий модели.

Modified Time
Дата модификации модели.

Параметры из блока Details

Details
Если включён, то объект является главным details-объектом, который хранит основные параметры.

No Waving
Если включён, то модели травы не будут колыхаться от ветра.

Min Scale
Минимальный размер.

Max Scale
Максимальный размер.

Detail Index
Номер модели в файле *.details.

Detail Color
Цвет детальной модели. Используется только внутри блендера. Это значение не сохраняется в файл при экспорте в *.details. При изменении параметра Detail Index, цвет автоматически сгенерируется заново. Этот параметр можно скопировать для использования при рисовании в окне Image Editor или при рисовании по модели в режиме Texture Paint в окне 3D Veiwport.

Meshes Object
Указывает объект, который является родителем для мешей растительности. Меши растительности должны иметь в качестве родителя этот объект.

Slots Base Object
Указывает объект, который задаёт нижнюю границу слотов.

Slots Top Object
Указывает объект, который задаёт вехнюю границу слотов.

Format
Формат освещения.

Builds 1569-CoP - формат для *.details файлов из билдов, начиная от 1569 до ЗП. Содержит три компонента: свет от статичных источников света, тени от солнца, хэми освещение.
1096-1558 - формат для *.details файлов из билдов, начиная от 1096 до 1558. Содержит один общий компонент освещения.

Lights
Указывает изображение для статичного света (для формата Builds 1569-CoP) или общий свет (для формата 1096-1558).

Hemi
Указывает изображение для hemi освещения.

Shadows
Указывает изображение для теней от солнца.

Mesh 0/1/2/3
Эти четыре параметра указывают четыре изображения, которые задают плотность и вид травы. Каждый слот травы может иметь до четырёх моделей травы. Поэтому трава задаётся четырьмя изображениями. Чёрные пиксели на данных изображениях означают отсутствие меша. Модель травы задаётся в RGB компонентах изображения. Цвет моделей можно скопировать из параметра Detail Color. Плотность травы задаётся с помощью Alpha-канала изображения.

Операторы из блока Details

Pack Details Images
Упаковывает все изображения, которые указаны в параметрах в блоке Details. Этот параметр используется для того, чтобы автоматически упаковать все изображения в blend-файл. Обычно данный оператор запускается после редактирования изображений, чтобы не потерять изменения после перезагрузки blend-файла. Данный оператор аналогичен оператору Image > Pack из окна Image Editor, только выполняет упаковку сразу для всех изображений за раз.

Параметры из блока Level

Level
Если включён, то объект является частью игрового уровня. Например, объект может быть визуалом, порталом, источником света и т. д.

Type
Тип объекта локации.

Level - объект локации, который хранит основные настройки.
Visual - визуальный объект.
Portal - портал.
Light - динамический источник света, который используется на динамическом освещении в игре.
CForm - объект коллизии.

Sectors Object
Указывает объект секторов. Этот объект должен иметь в качестве потомков объекты-секторы.

Portals Object
Указывает объект порталов. Этот объект должен иметь в качестве потомков объекты-порталы. Портал - это меш объект, у которого тип установлен на Portal.

Lights Object
Указывает объект источников света. Этот объект должен иметь в качестве потомков объекты, у которых тип установлен на Light.

Glows Object
Указывает объект источников света. Этот объект должен иметь в качестве потомков glow-объекты. Glow - это меш-объект, у которого есть текстура и установлен движковый шейдер.

Visual Type
Тип визуального объекта.

Use Fastpath Geometry
При экспорте в level/level.geom/level.geomx создавать объекту геометрию для просчёта теней на динамическом освещении. Данная геометрия сохраняется в файл level.geomx и позволяет создавать динамические тени на объекте. Обычно данный параметр отключается для прозрачных поверхностей (колючая проволока, сетка рабица и т. д.).

Color Scale: Light, Hemi, Sun
Цвет освещения от источников света, интенсивность освещения солнца, интенсивность hemi освещения. Солнце и hemi не имеют цвета, только яркость. Если установить цвет, то при экспорте он будет игнорироваться.

Color Bias: Light, Hemi, Sun
Аналогично Color Scale, но для ??? (TODO).

Sector Front
Объект, который является передним сектором.

Sector Back
Объект, который является задним сектором.

Controller
Влияние.

Static - свет источников света.
Hemi - hemi свет.
Sun - свет солнца.

Light Type
Тип источника света.

Point - точечный.
Spot - прожектор.
Directional - направленный.

Diffuse
Основной диффузный цвет.

Specular
Цвет бликов.

Ambient
Цвет ambient.

Cutoff Range
Радиус источника света. Аналогичен параметру Range в Level Editor.

Falloff
Спад.

Constant Attenuation
Константное затухание света.

Linear Attenuation
Линейное затухание света.

Quadratic Attenuation
Квадратичное затухание света.

Inner Angle Theta
Внутренний угол конуса прожектора.

Outer Angle Phi
Внешний угол конуса прожектора.
