# Create Connected Bones Operator

___

## About

Этот оператор создаёт две новые арматуры:




Арматура Connected
На основе активной арматуры создаёт новую арматуру, у которой кости соединены в цепочку. При этом голова кости остаётся на исходной позиции, а хвост перемещается в начало дочерней кости (если дочерняя кость одна) или в геометрический центр всех дочерних костей (если их много). Родительская связь костей устанавливается на Keep Offset, вместо Connected, несмотря на то, что хвост кости совпадает с головой дочерней кости. Созданный объект арматуры имеет суффикс connected. Количество и иерархия костей отличается от исходной арматуры. Все кости хранятся на первом и последнем слоях. Для анимации используется первый слой. К созданной арматуре привязаны кости исходной арматуры с помощью констрейнтов Copy Transforms, что аналогично привязыванию костей с помощью оператора Link Bones. Их можно отвязать с помощью оператора Unlink Bones. Либо снова привязать с помощью Link Bones. Созданная арматура используется для создания анимаций, так как кости, выстроенные в цепочку, легче настраивать и анимировать. Исходную арматуру нужно использовать для экспорта. Для этого нужно исходной арматуре в список Motions добавить все анимации от connected-арматуры и в параметре Dependency указать connected-арматуру. Во время экспорта, нужно выделять исходную арматуру. Connected-арматуру выделять не нужно, так как она является вспомогательной и используется только внутри блендера для создания анимаций.




Арматура Weight
Помимо connected-арматуры, создаётся weight-арматура, у которой имена, количество и иерархия костей совпадают с исходной. Эту арматуру можно использовать в режиме Weight Paint для изменения весов вершин. И для этой арматуры лучше срабатывает автоматическая привязка (Object > Parent > With Automatic Weights), так как габариты костей совпадают с габаритами вершин, которые привязаны к данной кости. X-Ray шейпы костей (Box, Cylinder или Sphere) адаптируются под новые трансформации костей. Это позволяет в игре заменить исходную арматуру на weight-арматуру, если объект не использует анимации. Если анимации есть, то их нужно будет адаптировать под новые кости.

## Sources

[Source](https://github.com/PavelBlend/blender-xray/wiki/Operator-Create-Connected-Bones)
